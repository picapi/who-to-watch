(this["webpackJsonpwho-to-watch"]=this["webpackJsonpwho-to-watch"]||[]).push([[0],{104:function(e,t,n){"use strict";n.r(t);var s=n(0),a=n.n(s),r=n(20),i=n.n(r),c=(n(78),n(14)),o=n(15),l=n(19),h=n(18),j=(n(79),n(111)),u=n(118),d=n(112),b=n(115),p=n(72),O=(n(80),n(117)),f=n(109),m=n(116),x=n(119),v=n(108),g=n(110),w=n(65),y=n.n(w),C=n(1),_=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e,t=[];if(null!=this.props.streamer.streams.twitch&&(t.push(Object(C.jsx)(O.a,{eventKey:"twitch-"+this.props.streamer.name,title:Object(C.jsx)(v.a,{}),children:Object(C.jsx)(f.a,{aspectRatio:"16x9",children:Object(C.jsx)(y.a,{url:this.props.streamer.streams.twitch,width:"100%",height:"100%"})})})),null==e&&(e="twitch-"+this.props.streamer.name)),null!=this.props.streamer.streams.youtube&&(t.push(Object(C.jsx)(O.a,{eventKey:"youtube-"+this.props.streamer.name,title:Object(C.jsx)(g.a,{}),children:Object(C.jsx)(f.a,{aspectRatio:"16x9",children:Object(C.jsx)(y.a,{url:this.props.streamer.streams.youtube,width:"100%",height:"100%"})})})),null==e&&(e="youtube-"+this.props.streamer.name)),this.props.streamer.links)for(var n=[],s=0,a=Object.keys(this.props.streamer.links);s<a.length;s++){var r=a[s];n.push(Object(C.jsx)(j.a,{target:"_blank",href:this.props.streamer.links[r],children:r}))}return Object(C.jsx)(m.a,{children:Object(C.jsxs)(m.a.Body,{children:[Object(C.jsx)(m.a.Title,{children:this.props.streamer.name}),Object(C.jsx)("p",{children:this.props.streamer.description}),Object(C.jsx)(u.a,{direction:"horizontal",gap:3,children:n}),Object(C.jsx)(x.a,{defaultActiveKey:e,activeKey:e,className:"mb-3",children:t})]})})}}]),n}(a.a.Component),S=_,k=n(42),L=n(113),B=n(35),R=window.sessionStorage;function F(e){var t=JSON.parse(R.getItem(e));return null==t&&(t={history:[],seen:[],current:null}),t.seen=new Set(t.seen),t}function H(e,t){t.seen=Object(B.a)(t.seen),R.setItem(e,JSON.stringify(t))}function I(e,t){var n=F(e),s=new Set;if(t.length>0){var a,r=Object(k.a)(t);try{for(r.s();!(a=r.n()).done;){var i=a.value;s.add(i.name)}}catch(c){r.e(c)}finally{r.f()}}n.seen=s,H(e,n)}function N(e,t){var n,s=[],a=[],r=F(e),i=Object(k.a)(t);try{for(i.s();!(n=i.n()).done;){var c=n.value;r.seen.has(c.name)?a.push(c):s.push(c)}}catch(o){i.e(o)}finally{i.f()}return{unseen_pool:s,seen_pool:a}}var M=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).handleClose=function(){return s.setState({show:!1})},s.handleShow=function(){return s.setState({show:!0})},s.state={show:!1},s}return Object(o.a)(n,[{key:"render",value:function(){var e,t=this,n=F(this.props.data_path).history,s=[],a=Object(k.a)(n);try{var r=function(){var n=e.value;s.push(Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("a",{href:"#",onClick:function(e){e.preventDefault(),t.props.link_function(n),t.handleClose()},children:n}),Object(C.jsx)("br",{})]}))};for(a.s();!(e=a.n()).done;)r()}catch(i){a.e(i)}finally{a.f()}return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(p.a.Link,{href:"#",onClick:this.handleShow,children:"Watch History"}),Object(C.jsxs)(L.a,{show:this.state.show,onHide:this.handleClose,children:[Object(C.jsx)(L.a.Header,{closeButton:!0,children:Object(C.jsx)(L.a.Title,{children:"Watch History"})}),Object(C.jsxs)(L.a.Body,{children:[Object(C.jsx)("p",{children:"Click on a stream below to watch them again!"}),s,Object(C.jsx)(j.a,{onClick:function(){!function(e){var t=F(e);t.history=[],H(e,t)}(t.props.data_path),t.handleClose()},children:"Clear History"})]})]})]})}}]),n}(a.a.Component),T=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),s=e[t];e[t]=e[n],e[n]=s}return e},U=n(37),D=n(114),J=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).handleClose=function(){return s.setState({show:!1})},s.handleShow=function(){return s.setState({show:!0})},s.state={show:!1,value:e.data_path},s.handleChange=s.handleChange.bind(Object(U.a)(s)),s.handleSubmit=s.handleSubmit.bind(Object(U.a)(s)),s}return Object(o.a)(n,[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=new URLSearchParams;t.set("list",this.state.value),console.log(t.toString()),window.location.search=t.toString()}},{key:"render",value:function(){return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(p.a.Link,{href:"#",onClick:this.handleShow,children:"Change List"}),Object(C.jsxs)(L.a,{show:this.state.show,onHide:this.handleClose,children:[Object(C.jsx)(L.a.Header,{closeButton:!0,children:Object(C.jsx)(L.a.Title,{children:"Change List"})}),Object(C.jsxs)(L.a.Body,{children:[Object(C.jsx)("p",{children:"Input a URL below to use that list on this page. Warning: Invalid URLs may cause issues."}),Object(C.jsxs)(D.a,{onSubmit:this.handleSubmit,children:[Object(C.jsxs)(D.a.Group,{className:"mb-3",controlId:"formpath",children:[Object(C.jsx)(D.a.Label,{children:"URL"}),Object(C.jsx)(D.a.Control,{placeholder:"lists/mcc-rising.json",value:this.state.value,onChange:this.handleChange})]}),Object(C.jsx)(j.a,{variant:"primary",type:"submit",children:"Submit"})]}),Object(C.jsx)("p",{children:"You can also use some of the lists we've pre-created!"}),Object(C.jsx)(j.a,{href:"?list=lists/mcc-rising.json",children:"MCC Rising"})]})]})]})}}]),n}(a.a.Component),K=new URLSearchParams(window.location.search),P=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).state={error:null,isLoaded:!1,loaded_data:null},s}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=K.get("list");null==t&&(t="lists/mcc-rising.json"),fetch(t).then((function(e){return e.json()})).then((function(n){var s=N(t,n.entries),a=s.unseen_pool,r=s.seen_pool;console.log(r),a=T(a);var i=function(e,t){var n=F(e);return 1===(t=t.filter((function(e){return e.name===n.current}))).length?t.pop():null}(t,a);null==i?i=a.pop():a.splice(a.indexOf(i),1),e.setState({isLoaded:!0,data_path:t,meta:n.meta,seen_pool:r,unseen_pool:a,selected_streamer:i,all_streamers:n.entries})}),(function(t){e.setState({isLoaded:!0,error:t})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.error,s=t.data_path,a=t.isLoaded,r=t.meta,i=t.seen_pool,c=t.unseen_pool,o=t.selected_streamer,l=t.all_streamers;if(n)return Object(C.jsxs)("div",{children:["Error: ",n.message,Object(C.jsx)("br",{}),Object(C.jsx)("a",{href:"/",children:"Back to safety"})]});if(a){if(I(s,i),null!=o){!function(e,t){var n=F(e);console.log(Object.keys(n)),n.history.at(-1)!==t&&(n.history.push(t),H(e,n))}(s,o.name),function(e,t){var n=F(e);n.current=t.name,H(e,n)}(s,o);var h=Object(C.jsx)(S,{streamer:o})}else h=Object(C.jsxs)("div",{children:[Object(C.jsx)("h1",{children:"You've gone through every streamer in the list!"}),Object(C.jsx)(j.a,{onClick:function(){I(s,[]);var t=N(s,l),n=t.unseen_pool,a=t.seen_pool,r=(n=T(n)).pop();e.setState({seen_pool:a,unseen_pool:n,selected_streamer:r})},children:"Reset pool"})]});return Object(C.jsx)("div",{children:Object(C.jsxs)(u.a,{gap:3,children:[Object(C.jsx)(d.a,{children:Object(C.jsx)(b.a,{fixed:"top",bg:"dark",variant:"dark",children:Object(C.jsxs)(d.a,{children:[Object(C.jsx)(b.a.Brand,{href:"",children:"who-to-watch"}),Object(C.jsxs)(p.a,{className:"me-auto",children:[Object(C.jsx)(M,{data_path:s,link_function:function(t){return e.setState({selected_streamer:l.filter((function(e){return e.name==t})).pop()})}}),Object(C.jsx)(J,{data_path:s,children:"Change List"})]})]})})}),Object(C.jsxs)(d.a,{children:[Object(C.jsx)("h1",{children:r.name}),Object(C.jsx)("p",{children:r.description}),Object(C.jsxs)(u.a,{direction:"horizontal",gap:3,children:[Object(C.jsx)(j.a,{onClick:function(){i.push(o),e.setState({seen_pool:i,selected_streamer:c.pop(),unseen_pool:T(c)})},children:"Next stream"}),c.length," left"]}),h]})]})})}return Object(C.jsx)("div",{children:"Loading..."})}}]),n}(a.a.Component),W=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,120)).then((function(t){var n=t.getCLS,s=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),s(e),a(e),r(e),i(e)}))};i.a.render(Object(C.jsx)(a.a.StrictMode,{children:Object(C.jsx)(P,{})}),document.getElementById("root")),W()},78:function(e,t,n){},79:function(e,t,n){}},[[104,1,2]]]);
//# sourceMappingURL=main.ff5aa24f.chunk.js.map